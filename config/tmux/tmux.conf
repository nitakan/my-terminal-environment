# プレフィックスキー（既存設定を維持）
unbind C-b
set -g prefix C-q
bind C-q send-prefix

# 基本設定
set -g mouse on                     # マウス操作を有効化
set -g base-index 1                 # ウィンドウ番号を1から開始
setw -g pane-base-index 1           # ペイン番号を1から開始
set -g history-limit 10000          # 履歴を増やす
set -g default-terminal "tmux-256color"  # 256色対応

# ステータスバー
set -g status-style "bg=black,fg=white"
set -g window-status-format " #I:#W "
set -g window-status-current-format " #I:#W "
set -g window-status-current-style "bg=green,fg=black,bold"
set -g window-status-separator ""

# ペイン境界線
set -g pane-border-lines single
set -g pane-border-status top
set -g pane-border-format " #P: #{pane_current_command} "

# ペイン分割
bind \\ split-window -h -c "#{pane_current_path}"  # 縦分割
bind - split-window -v -c "#{pane_current_path}"  # 横分割

# ペイン分割（プレフィックスなし）
bind -n M-\\ split-window -h -c "#{pane_current_path}"
bind -n M-- split-window -v -c "#{pane_current_path}"

# ペイン移動（vim風 + 矢印キー）
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
bind Left select-pane -L
bind Down select-pane -D
bind Up select-pane -U
bind Right select-pane -R

# ペイン移動（プレフィックスなし）
bind -n M-Left select-pane -L
bind -n M-Down select-pane -D
bind -n M-Up select-pane -U
bind -n M-Right select-pane -R

# ペインズーム（プレフィックスなし）
bind -n M-z resize-pane -Z

# ウィンドウ切り替え
bind S-Left previous-window
bind S-Right next-window

# ウィンドウ切り替え（プレフィックスなし）
bind -n M-[ previous-window
bind -n M-] next-window

# ペインを閉じる
bind BSpace kill-pane

# ポップアップシェル
unbind f
bind f display-popup -E -w 80% -h 80% -- zsh
bind -n M-f display-popup -E -w 80% -h 80% -- zsh

# ポップアップgitui
bind g display-popup -E -w 90% -h 90% -- gitui

# ポップアップworktree選択
unbind w
bind w display-popup -E -w 80% -h 80% -- tmux-worktree

# レイアウト選択
bind l display-popup -E -w 60% -h 40% -- tmux-layout

# 設定リロード
bind r source-file ~/.tmux.conf \; display "Config reloaded!"
